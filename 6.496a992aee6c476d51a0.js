(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Bxvx:function(t,i,e){"use strict";e.r(i),e.d(i,"GameModule",function(){return f});var o=e("ofXK"),n=e("tyNb");function r(t,i,e,o){return new(e||(e=Promise))(function(n,r){function a(t){try{c(o.next(t))}catch(i){r(i)}}function s(t){try{c(o.throw(t))}catch(i){r(i)}}function c(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(a,s)}c((o=o.apply(t,i||[])).next())})}var a=e("AytR"),s=e("fXoL"),c=e("on2l");let h=(()=>{class t{constructor(){this.country="",this.capital="",this.capitalID=""}randomNumber(){return Math.floor(255*Math.random())+1}randomCapital(){return r(this,void 0,void 0,function*(){const t=this.randomNumber();return yield fetch("https://restcountries.eu/rest/v2/all").then(t=>t.json()).then(i=>{this.country=i[t].name,this.capital=i[t].capital,this.capitalID=this.capital.replace(" ","+")}),{capital:this.capital,country:this.country,capitalID:this.capitalID}})}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=s.Bb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(){this.temp=0}randomNumber(){return Math.floor(10*Math.random())+1}weatherC(t){return r(this,void 0,void 0,function*(){return yield fetch("https://api.openweathermap.org/data/2.5/weather?q="+t+"&appid="+a.a.apiOpenWeather).then(t=>t.json()).then(t=>{try{return this.temp=Math.floor(t.main.temp-273.15),{temp:this.temp,opt1:this.temp+this.randomNumber(),opt2:this.temp+this.randomNumber()}}catch(i){return console.log(i),"error"}}),{temp:this.temp,opt1:this.temp+this.randomNumber(),opt2:this.temp+this.randomNumber()}})}weatherF(t){return r(this,void 0,void 0,function*(){return yield fetch("https://api.openweathermap.org/data/2.5/weather?q="+t+"&appid="+a.a.apiOpenWeather).then(t=>t.json()).then(t=>{this.temp=Math.floor(1.8*(t.main.temp-273.15)+32)}),{temp:this.temp,opt1:this.temp+this.randomNumber(),opt2:this.temp+this.randomNumber()}})}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=s.Bb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),l=(()=>{class t{transform(t,i,e){return!0===i?t+" \xb0C":t+" \xb0F"}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=s.Eb({name:"metric",type:t,pure:!0}),t})();const b=function(t){return{"gameButton-wrong":t}},u=function(t){return{"gameButton-right":t}},d=[{path:"",component:(()=>{class t{constructor(t,i,e,o,n){this.document=t,this.UService=i,this.CService=e,this.WService=o,this.router=n,this.score=0,this.country="",this.capital="",this.capitalId="",this.payload={temp:!0,name:"Player",score:0},this.rightOpt=4,this.opt=[0,0,0],this.right=[!1,!1,!1],this.wrong=[!1,!1,!1]}ngOnInit(){return r(this,void 0,void 0,function*(){this.resetButtons();let t={capital:"",country:"",capitalID:""};for(;""===t.capital||""===t.country;)t=yield this.CService.randomCapital(),this.capitalId=t.capitalID;if(console.log(t),this.country=t.country,this.capital=t.capital,this.payload=this.UService.getSessionData(),console.log(this.payload),!0===this.payload.temp){const i=yield this.WService.weatherC(t.capitalID);this.fillData(i)}else{const i=yield this.WService.weatherF(t.capitalID);this.fillData(i)}})}onSelect(t){let i=new Audio;t===this.rightOpt?(console.log("right"),this.right[t]=!0,this.score=this.score+1,this.payload.score=this.score,i.src="assets/sounds/right.mp3",i.muted=!0,i.play(),this.reload()):(console.log("NO right"),this.wrong[t]=!0,this.score=this.score-1,this.payload.score=this.score,i.src="assets/sounds/noright.mp3",i.muted=!0,i.play())}fillData(t){console.log(t);const i=Math.floor(3*Math.random());this.rightOpt=i,this.opt[i]=t.temp,0===i&&(this.opt[1]=t.opt1,this.opt[2]=t.opt2),1===i&&(this.opt[0]=t.opt1,this.opt[2]=t.opt2),2===i&&(this.opt[1]=t.opt1,this.opt[0]=t.opt2)}reload(){return r(this,void 0,void 0,function*(){this.resetButtons();let t={capital:"",country:"",capitalID:""};for(;""===t.capital||""===t.country;)t=yield this.CService.randomCapital(),this.capitalId=t.capitalID;if(console.log(t),this.country=t.country,this.capital=t.capital,console.log(this.payload),!0===this.payload.temp){const i=yield this.WService.weatherC(t.capitalID);this.fillData(i)}else{const i=yield this.WService.weatherF(t.capitalID);this.fillData(i)}})}resetButtons(){this.right=[!1,!1,!1],this.wrong=[!1,!1,!1]}onSubmit(){console.log("--onSubmit--End"),this.UService.setSessionData(this.payload),this.router.navigate(["/end"])}onMap(){window.open(a.a.urlMaps+this.capitalId,"_blank")}}return t.\u0275fac=function(i){return new(i||t)(s.Fb(o.c),s.Fb(c.a),s.Fb(h),s.Fb(p),s.Fb(n.b))},t.\u0275cmp=s.zb({type:t,selectors:[["app-game"]],decls:32,vars:33,consts:[[1,"gameContainer"],[1,"left"],[1,"leftContainer"],[1,"internalLeft"],[1,"cityContainer"],[1,"city"],[1,"country"],["target","\u201d_blank\u201d",3,"click"],[1,"ubi"],[1,"right"],[1,"rightContainer"],[1,"buttonContainer"],[1,"gameButton",3,"ngClass","click"],[1,"answer"],[1,"score"],[1,"gameButton",2,"height","10%","margin-bottom","2%",3,"click"]],template:function(t,i){1&t&&(s.Ib(0,"body"),s.Ib(1,"div",0),s.Ib(2,"div",1),s.Ib(3,"div",2),s.Ib(4,"div",3),s.Ib(5,"div",4),s.Ib(6,"h1",5),s.Wb(7),s.Hb(),s.Ib(8,"h2",6),s.Wb(9),s.Hb(),s.Hb(),s.Ib(10,"a",7),s.Nb("click",function(){return i.onMap()}),s.Gb(11,"div",8),s.Hb(),s.Hb(),s.Hb(),s.Hb(),s.Ib(12,"div",9),s.Ib(13,"div",10),s.Ib(14,"div",11),s.Ib(15,"div",12),s.Nb("click",function(){return i.onSelect(0)}),s.Ib(16,"div",13),s.Wb(17),s.Pb(18,"metric"),s.Hb(),s.Hb(),s.Ib(19,"div",12),s.Nb("click",function(){return i.onSelect(1)}),s.Ib(20,"div",13),s.Wb(21),s.Pb(22,"metric"),s.Hb(),s.Hb(),s.Ib(23,"div",12),s.Nb("click",function(){return i.onSelect(2)}),s.Ib(24,"div",13),s.Wb(25),s.Pb(26,"metric"),s.Hb(),s.Hb(),s.Hb(),s.Ib(27,"h1",14),s.Wb(28),s.Hb(),s.Ib(29,"div",15),s.Nb("click",function(){return i.onSubmit()}),s.Ib(30,"div",13),s.Wb(31," End "),s.Hb(),s.Hb(),s.Hb(),s.Hb(),s.Hb(),s.Hb()),2&t&&(s.wb(7),s.Xb(i.capital),s.wb(2),s.Xb(i.country),s.wb(6),s.Rb("ngClass",s.Sb(21,b,i.wrong[0]))("ngClass",s.Sb(23,u,i.right[0])),s.wb(2),s.Yb(" ",s.Qb(18,12,i.opt[0],i.payload.temp)," "),s.wb(2),s.Rb("ngClass",s.Sb(25,b,i.wrong[1]))("ngClass",s.Sb(27,u,i.right[1])),s.wb(2),s.Yb(" ",s.Qb(22,15,i.opt[1],i.payload.temp)," "),s.wb(2),s.Rb("ngClass",s.Sb(29,b,i.wrong[2]))("ngClass",s.Sb(31,u,i.right[2])),s.wb(2),s.Yb(" ",s.Qb(26,18,i.opt[2],i.payload.temp)," "),s.wb(3),s.Yb("Score: ",i.score,""))},directives:[o.h],pipes:[l],styles:[""]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=s.Db({type:t}),t.\u0275inj=s.Cb({imports:[[n.c.forChild(d)],n.c]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=s.Db({type:t}),t.\u0275inj=s.Cb({imports:[[o.b,m]]}),t})()}}]);